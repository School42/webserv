# Test configuration demonstrating all features

server {
	# Multiple listen directives with interface:port pairs
	listen 8080;                    # Binds to 0.0.0.0:8080 (all interfaces)
	listen 127.0.0.1:8081;          # Binds to localhost:8081
	listen 192.168.1.100:8082;      # Binds to specific IP:8082
	
	server_name example.com www.example.com;
	
	# Server-level inheritable directives
	root /var/www/html;
	index index.html index.htm default.html;
	autoindex off;
	client_max_body_size 10M;
	
	# Error pages
	error_page 404 /404.html;
	error_page 500 /500.html;
	error_page 502 /502.html;
	
	# Location 1: Inherits everything from server
	location / {
		# No directives - will inherit root, index, autoindex, client_max_body_size
		# allowed_methods will default to GET  POST
	}
	
	# Location 2: Overrides root and client_max_body_size
	location /uploads {
		root /var/uploads;
		client_max_body_size 100M;
		allowed_methods POST DELETE;
		upload_store /tmp/uploads;
	}
	
	# Location 3: CGI configuration
	location /cgi-bin {
		root /usr/lib/cgi-bin;
		cgi_pass /usr/bin/python3;
		cgi_extension .py .cgi .pl;
		allowed_methods GET POST;
	}
	
	# Location 4: Redirect
	location /old-path {
		return 301 /new-path;
	}
	
	# Location 5: Custom autoindex
	location /downloads {
		autoindex on;
		# Inherits root, index, client_max_body_size from server
	}
}

server {
	# Second server on different ports
	listen 9090;
	listen 0.0.0.0:9091;
	
	server_name api.example.com;
	
	root /var/www/api;
	index api.html;
	client_max_body_size 5M;
	
	location /v1 {
		# Inherits from server
		allowed_methods GET POST DELETE;
	}
	
	location /v1/upload {
		client_max_body_size 50M;
		allowed_methods POST;
	}
	
	location /v1/webhook {
		allowed_methods POST;
		client_max_body_size 1M;
	}
}

# Third server - minimal configuration to test defaults
server {
	listen 3000;
	root /var/www/minimal;
	
	# This server will get default values for:
	# - index: index.html
	# - autoindex: off
	# - client_max_body_size: 1M
	
	location / {
		# This location will inherit root from server
		# and get default allowed_methods: GET  POST
	}
}